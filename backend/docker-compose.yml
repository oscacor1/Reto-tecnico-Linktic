version: "3.9"
services:
  product-service:
    build:
      context: .
      dockerfile: product-service.Dockerfile
    environment:
      - DATABASE_URL=sqlite:///./products.db
      - INTERNAL_API_KEY=super-secret-key
    ports:
      - "8001:8000"
  inventory-service:
    build:
      context: .
      dockerfile: inventory-service.Dockerfile
    environment:
      - INTERNAL_API_KEY=super-secret-key
      - PRODUCT_SERVICE_BASE_URL=http://product-service:8000
      - REQUEST_TIMEOUT_SECONDS=2.0
      - REQUEST_MAX_RETRIES=3
    ports:
      - "8002:8000"
    depends_on:
      - product-service
